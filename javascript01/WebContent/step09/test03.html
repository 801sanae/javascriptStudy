<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<button id='btn1' type='button'>요청</button>
	<br>

	<textarea id='message' cols='50' rows='10'></textarea>

	<script type="text/javascript">
		/*비동기 요청
		 * - 웹 브라우저에서 요청을 별도의 스레드로 처리하는 것.
		 *
		 */
		document.getElementById('btn1').onclick = function(event) {
			//3. get  요청 보내기 (비동기요청처리)
			var xhr = new XMLHttpRequest();
			
			// 다음 함수는 요청상태가 바뀔때 마다 호출된디ㅏ.
			xhr.onreadystatechange = function(){
				console.log("--->", xhr.readyState);
				/*		 
					Holds the status of the XMLHttpRequest. Changes from 0 to 4:
					0: request not initialized 
					1: server connection established : 서버에 연결되엇을 때 open()
					2: request received  : 서버에 요청을 보냇을 때 send()
					3: processing request  : 서버가 요청을 처리 중일 때
					4: request finished and response is ready : 서버로부터 응답을  받았을 때
				 */
				if(xhr.readyState==4){
				console.log("데헷");
				document.getElementById('message').value = xhr.responseText;
				
			}
			};
			console.log("11111111111111111111111111");
			
			xhr.open('GET', 'test01.jsp', true);//비동기 요청 지정
			//비동기 요청에서는 서버의 요청을 보내고 즉시 리턴한다.
			console.log("22222222222222222222222");
			
			xhr.send();
			console.log("33333333333333333333333s");
			};	
			

			//서버의 응답을 받기도 전에 responseText를 사용한다.
			// ->responseText라는 이름으로 어떤 값도 저장되어 있지 않다.
			// ->비동기요청을 다음과 같이 서버의 응답을 받기도 전에 responseText를 사용해서는 안된다.
			//document.getElementById('message').value = xhr.responseText;
	</script>
</body>
</html>